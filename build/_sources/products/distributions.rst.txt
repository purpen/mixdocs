=================
分销模块
=================


分销池
----------------
获取所有分销商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/index``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
cid          Number    可选                   分类Id
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
sort         String    可选                   排序规则
qk           String    可选                   筛选条件
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


热门单品
----------------
获取分销中心最受欢迎的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/hot``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


官方推荐
----------------
获取分销中心推荐的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/sticked``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


新品首发
----------------
获取分销中心最新推出的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/latest``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


我的分销商品
----------------
获取品牌馆所有分销的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                   店铺编号
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
status       String    可选         1         商品状态 0: 全部  1: 上架中  2: 仓库中
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


放入仓库
--------------------
将分销池中的商品放入店铺仓库中

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/rid/warehouse``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
=====================  ==========  =========  ==========  =============================
名称                    类型        是否必须     默认值       描述说明
=====================  ==========  =========  ==========  =============================
rid                    String       必须                   商品编号
sid                    String       可选                   店铺编号
=====================  ==========  =========  ==========  =============================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "is_distributed": true,
            "product_packet_id": 0,
            "status": false,
            "stick_text": "",
            "store_id": 2
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 403,
            "message": "您的店铺已经分销过该商品！"
        },
        "success": false
    }


立即分销
--------------------
将分销池中的商品加入到自己店铺中

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/rid/publish``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
=====================  ==========  =========  ==========  =============================
名称                    类型        是否必须     默认值       描述说明
=====================  ==========  =========  ==========  =============================
rid                    String       必须                   商品编号
sid                    String       可选                   店铺编号
product_packet_id      Number       必须          0        商品组ID
stick_text             String       必须                   推荐语
=====================  ==========  =========  ==========  =============================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "is_distributed": true,
            "product_packet_id": 2,
            "status": false,
            "stick_text": "分销推荐语......",
            "store_id": 2
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 403,
            "message": "您的店铺已经分销过该商品！"
        },
        "success": false
    }


删除分销
----------------
店铺不再分销该商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<rid>``
* API接口请求方法：``DELETE``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                  店铺编号
rid          String    必须                  商品编号
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 204,
            "message": "All deleted."
        },
        "success": true
    }


查看详情
----------------
立即分销, 显示商品详情

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<string:rid>/detail``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                  店铺编号
rid          String    必须                  商品编号
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "categories": [
                {
                    "cover": "http://127.0.0.1:9000/_uploads/photos/180530/72de0b9ca1ae5a3.jpg",
                    "description": "手机描述信息",
                    "id": 2,
                    "name": "手机",
                    "pid": 0,
                    "sort_order": 16,
                    "status": 1
                },
                {
                    "cover": "http://127.0.0.1:9000/_uploads/photos/180530/72de0b9ca1ae5a3.jpg",
                    "description": "华为手机描述信息",
                    "id": 16,
                    "name": "华为手机",
                    "pid": 2,
                    "sort_order": 11,
                    "status": 1
                }
            ],
            "commission_price": 120.98,
            "commission_rate": 3.5,
            "content": "图文详情内容...",
            "features": "亮点",
            "images": [
                [
                    {
                        "created_at": 1527587113,
                        "filename": "m.jpg",
                        "filepath": "180529/e5a6b51ad55208d.jpg",
                        "id": 5,
                        "type": 1,
                        "view_url": "http://127.0.0.1:9000/_uploads/photos/180529/e5a6b51ad55208d.jpg"
                    },
                    {
                        "created_at": 1527587113,
                        "filename": "l.jpg",
                        "filepath": "180529/4158809a4303eab.jpg",
                        "id": 6,
                        "type": 1,
                        "view_url": "http://127.0.0.1:9000/_uploads/photos/180529/4158809a4303eab.jpg"
                    }
                ]
            ],
            "is_custom_service": true,
            "material_name": "棉.麻",
            "max_price": 3456.7,
            "max_sale_price": 4567,
            "min_price": 1234.5,
            "min_sale_price": 2345,
            "name": "iphoneX",
            "packets": [
                {
                    "name": "手机",
                    "product_packet_id": 3
                },
                {
                    "name": "电脑",
                    "product_packet_id": 4
                },
                {
                    "name": "服装",
                    "product_packet_id": 6
                }
            ],
            "product_packet_id": 0,
            "stick_text": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


仓库商品上架
----------------
店铺仓库中商品上架

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<rid>/shelves``
* API接口请求方法：``PUT``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

=====================  ==========  =========  ==========  =============================
名称                    类型        是否必须     默认值       描述说明
=====================  ==========  =========  ==========  =============================
sid                    String      可选                    店铺编号
rid                    String      必须                    商品编号
product_packet_id      Number                              商品组编号
stick_text             String      必须                    推荐语
=====================  ==========  =========  ==========  =============================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 400,
            "message": "您没有分销该商品的权限!"
        },
        "success": false
    }


