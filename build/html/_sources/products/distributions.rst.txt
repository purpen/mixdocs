=================
分销模块
=================


分销池
----------------
获取所有分销商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/index``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
cid          Number    可选                   分类Id
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
sort         String    可选                   排序规则
qk           String    可选                   筛选条件
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


热门单品
----------------
获取分销中心最受欢迎的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/hot``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


官方推荐
----------------
获取分销中心推荐的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/hot``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


新品首发
----------------
获取分销中心最新推出的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/new``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


我的分销商品
----------------
获取品牌馆所有分销的商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                   店铺编号
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
status       String    可选         1         商品状态 0: 全部  1: 上架  2: 下架
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. literalinclude:: distribution_product_list.js
    :language: javascript


立即分销/放入仓库
--------------------
将分销池中的商品加入到自己店铺中

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
=====================  ==========  =========  ==========  =============================
名称                    类型        是否必须     默认值       描述说明
=====================  ==========  =========  ==========  =============================
sid                    String       可选                   店铺编号
rid                    String       必须                   商品编号
product_packet_id      Integer      可选          0        商品组ID
status                 bool         必须                   商品状态 true:上架中; false:仓库中
stick_text             String       可选                   推荐语
=====================  ==========  =========  ==========  =============================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 403,
            "message": "您的店铺已经分销过该商品！"
        },
        "success": false
    }


删除分销
----------------
店铺不再分销该商品

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<rid>``
* API接口请求方法：``DELETE``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                  店铺编号
rid          String    必须                  商品编号
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


查看详情
----------------
查看店铺分销商品详情

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<string:rid>/detail``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~
===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sid          String    可选                  店铺编号
rid          String    必须                  商品编号
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "categories": [
                4
            ],
            "content": [],
            "images": [
                {
                    "created_at": 1527673385,
                    "filename": "n.jpg",
                    "filepath": "180530/72de0b9ca1ae5a3.jpg",
                    "id": 56,
                    "view_url": "http://127.0.0.1:9000/_uploads/photos/180530/72de0b9ca1ae5a3.jpg"
                }
            ],
            "skus": [
                {
                    "cost_price": "12345.00",
                    "cover": "http://127.0.0.1:9000/_uploads/photos/180530/72de0b9ca1ae5a3.jpg",
                    "id_code": "",
                    "mode": "36码 白",
                    "price": "23456.00",
                    "product_name": "B-男装1",
                    "rid": "118300195654",
                    "s_color": "白",
                    "s_model": "36码",
                    "s_weight": "0.00",
                    "sale_price": "0.00",
                    "stock_count": 56
                },
                {
                    "cost_price": "12345.00",
                    "cover": "http://127.0.0.1:9000/_uploads/photos/180530/72de0b9ca1ae5a3.jpg",
                    "id_code": "",
                    "mode": "37码 黑",
                    "price": "23456.00",
                    "product_name": "B-男装1",
                    "rid": "118300750761",
                    "s_color": "黑",
                    "s_model": "37码",
                    "s_weight": "0.00",
                    "sale_price": "0.00",
                    "stock_count": 35
                }
            ],
            "tags": ""
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 403,
            "message": "此商品你无权操作！"
        },
        "success": false
    }


仓库商品上架
----------------
店铺仓库中商品上架

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/fx_distribute/<rid>/shelves``
* API接口请求方法：``PUT``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

=====================  ==========  =========  ==========  =============================
名称                    类型        是否必须     默认值       描述说明
=====================  ==========  =========  ==========  =============================
sid                    String      可选                    店铺编号
rid                    String      必须                    商品编号
product_packet_id      Integer                            商品组编号
stick_text             String      必须                    推荐语
=====================  ==========  =========  ==========  =============================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }

请求 ``失败`` 返回结果：

.. code-block:: javascript

    {
        "status": {
            "code": 400,
            "message": "您没有分销该商品的权限!"
        },
        "success": false
    }


