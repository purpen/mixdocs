====================
营销工具/优惠券模块
====================


优惠活动列表
----------------------
获取优惠活动列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/activities``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~

===============  ========  =========  ========  ====================================
名称              类型      是否必须    默认值     描述说明
===============  ========  =========  ========  ====================================
page             Number    可选         1         当前页码
per_page         Number    可选         10        每页数量
status           String    可选         1         活动状态 1: 进行中；2：待生效；3：已结束
===============  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "activities": [
                {
                    "id": 24,  // 活动id
                    "end_date": 1530547200,  // 结束时间
                    "created_at": 1530001603,  // 创建时间
                    "name": "优惠活动2",  // 活动名称
                    "start_date": 1528560000,  // 开始时间
                    "surplus_days": 7,  // 剩余天数
                    "total_quantity": 2000,  // 总数量
                    "type": 2  // 类型 1、同享券 2、单享券 3、满减
                    "items": [
                        {
                            "amount": 1,  // 面值
                            "code": "USNAKJEQROH",  // 优惠券代码
                            "created_at": 1530001603,  // 创建时间
                            "days": 7,  // 有效天数
                            "min_amount": 90,  // 限制金额
                            "pickup_count": 0,  // 领取数量
                            "surplus_count": 1000,  // 剩余数量
                            "use_count": 0,  // 使用数量
                            "type": 2,  // 类型 1、同享券 2、单享券 3、满减
                            "type_text": "部分商品可用"
                        }
                    ]
                }
            ],
            "count": 3,
            "next": "http://0.0.0.0:9000/api/v1.0/market/activities?page=2&status=1",
            "prev": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



优惠活动详情列表
----------------------
获取优惠活动详情列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/activities_item``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~

===============  ========  =========  ========  ====================================
名称              类型      是否必须    默认值     描述说明
===============  ========  =========  ========  ====================================
id               Number    必填                   优惠活动详情
===============  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "name": "优惠活动2",  // 活动名称
            "activity_id": 2,  // 活动id
            "start_date": 1528560000  // 开始时间
            "activity_status": 1,  // 活动状态 1，进行中 2，待生效 3，已结束
            "created_at": 1530001603,  // 创建时间
            "end_date": 1530547200,  // 结束时间
            "items": [
                {
                    "amount": 1,  // 金额
                    "code": "USNAKJEQROH",  // 优惠券code
                    "created_at": 1530001603,  // 创建时间
                    "days": 7,  // 有效期
                    "min_amount": 90,  // 限制金额
                    "pickup_count": 0,  // 领取数量
                    "surplus_count": 1000,  // 剩余数量
                    "type": 2,  // 类型 1、同享券 2、单享券 3、满减
                    "type_text": "部分商品可用",
                    "use_count": 0  // 使用数量
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


正在活动中的优惠券列表
----------------------
获取活动中优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/activity``
* API接口请求方法：``GET``
* API接口用户授权：``token``

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "count": 3,
            "coupons": [
                {
                    "amount": 2,  // 面值
                    "code": "UJXFRHYDMQW",  // 优惠券代码
                    "count": 100,  // 数量
                    "created_at": 1528947024,
                    "end_date": 2147483647,
                    "products": [],  // 商品
                    "min_amount": 30,  // 最小金额限制
                    "name": "FB",  //
                    "reach_amount": 30,  // 满足金额
                    "start_date": 0,  //
                    "type": 3,  // 优惠券类型 1、同享券 2、单享券 3、满减
                    "type_text": "消费满30.00元可减2.00元"  // 描述
                }
            ],
            "next": null,
            "prev": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


独立-用户获取自己的商家优惠券列表
-----------------------------------
独立-用户获取自己的商家优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_coupons``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "count": 1,
            "coupons": [
                {
                    "coupon": {
                        "amount": 30,  //面值
                        "code": "UVYSEZXQBMH",
                        "count": 100,
                        "created_at": 1531744639,
                        "days": 0,  // 有效天数
                        "end_date": 1538582400, // 活动结束时间
                        "min_amount": 0,  // 限制金额
                        "products": [],  // 可用商品
                        "reach_amount": 300,  // 满足金额
                        "start_date": 1525881600, // 活动开始时间
                        "type": 3,  // // 优惠券类型 1、同享券 2、单享券 3、满减
                        "type_text": "满300减30元"
                    },
                    "end_at": 1538040141,  // 到期时间
                    "get_at": null,  // 获得时间
                    "is_expired": false, // 是否过期
                    "is_used": false,  // 是否使用
                    "order_rid": null,  // 订单编号
                    "store_logo": "https://s3.moebeast.com/20180918/3505FgKkWolTuPukXCVMpxI22Q8ssunL.png",
                    "store_name": "乐喜生活馆",
                    "used_at": null  // 使用时间
                }
            ],
            "next": true,
            "prev": false
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



核心-用户获取自己的商家优惠券列表
-----------------------------------
核心-用户获取自己的商家优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/core_user_coupons``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "count": 1,
            "coupons": [
                {
                    "coupon": {
                        "amount": 30,  //面值
                        "code": "UVYSEZXQBMH",
                        "count": 100,
                        "created_at": 1531744639,
                        "days": 0,  // 有效天数
                        "end_date": 1538582400, // 活动结束时间
                        "min_amount": 0,  // 限制金额
                        "products": [],  // 可用商品
                        "reach_amount": 300,  // 满足金额
                        "start_date": 1525881600, // 活动开始时间
                        "type": 3,  // // 优惠券类型 1、同享券 2、单享券 3、满减
                        "type_text": "满300减30元"
                    },
                    "end_at": 1538040141, // 到期时间
                    "get_at": null,  // 获得时间
                    "is_expired": false,  // 是否过期
                    "is_used": false,  // 是否使用
                    "order_rid": null,  // 订单编号
                    "store_logo": "https://s3.moebeast.com/20180918/3505FgKkWolTuPukXCVMpxI22Q8ssunL.png",
                    "store_name": "乐喜生活馆", // 店铺名
                    "store_rid": "12313141", // 店铺编号
                    "used_at": null  // 使用时间
                }
            ],
            "next": true,
            "prev": false
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }




用户登录后获取商家优惠券列表
-------------------------------
用户登录后获取商家优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_master_coupons``
* API接口请求方法：``GET``
* API接口用户授权：``token``


请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
store_rid    String    可选                  店铺rid，核心填写，独立不填
===========  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupons": [
                {
                    "amount": 10,  // 面值
                    "code": "UHAOSIWFUVZ",  // 优惠券 code
                    "count": 100,
                    "created_at": 1531742069,  //
                    "days": 7,  // 有效期
                    "min_amount": 99,  // 最小金额
                    "products": [],
                    "reach_amount": 0,
                    "status": 1,  // 是否领取 0、未领取 1、已领取
                    "type": 1,  // 类型 1、同享券 2、单享券 3、满减
                    "type_text": "全店通用",
                    "end_date": 1538582400,  // 结束时间
                    "start_date": 1531670400,  // 开始时间
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



未登录用户获取商家优惠券、满减活动列表
-------------------------------------------
未登录用户获取商家优惠券、满减活动列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/not_login_coupons``
* API接口请求方法：``GET``


请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
store_rid    String    可选                  店铺rid，核心填写，独立不填
===========  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupons": [
                {
                    "amount": 10,  // 面值
                    "code": "UHAOSIWFUVZ",  // 优惠券code
                    "count": 100,  // 领取数量
                    "created_at": 1531742069,
                    "days": 7,  // 有效天数
                    "min_amount": 99,  // 最小金额
                    "products": [],  // 可用商品
                    "reach_amount": 0,  // 满足金额
                    "status": 1,  // 是否领取 0、未领取 1、已领取
                    "type": 1,  // 类型 1、同享券 2、单享券 3、满减
                    "type_text": "全店通用",
                    "end_date": 1538582400,  // 结束时间
                    "start_date": 1531670400,  // 开始时间
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


用户获取当前订单的符合条件的优惠券信息
------------------------------------------
用户获取当前订单的符合条件的优惠券信息

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_order_coupons``
* API接口请求方法：``POST``
* API接口用户授权：``token``


请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
items        Array     必须                  店铺明细
===========  ========  =========  ========  ====================================

**店铺明细**

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
items:
rid          String    必须                  店铺rid
sku_items    Array     必须                  商品详情
===========  ========  =========  ========  ====================================

**商品详情**

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sku_items:
sku          String     必须                  sku
quantity     Integer    必须                  数量
===========  ========  =========  ========  ====================================

**参考示例**

.. code-block:: javascript

    {
        "items":[
            {
                "rid":"2",
                "sku_items":[
                    {
                        "sku":"2",
                        "quantity":2000
                    }
                ]
            }
        ]
    }


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "2": [
                {
                    "coupon": {
                        "amount": 10, // 面值
                        "code": "URTNVFYOLKB",  // 优惠券code
                        "count": 100,
                        "created_at": 1531744081,
                        "days": 7,  // 有效天数
                        "min_amount": 99, // 最小金额
                        "products": [], // 可用商品
                        "reach_amount": 0,
                        "type": 1,  // 类型  1、同享券 2、单享券 3、满减
                        "type_text": "全店通用"
                    },
                    "end_at": 1532685052,  // 到期时间
                    "get_at": 1532080252,  // 领取时间
                    "is_expired": false,  // 开始时间
                    "is_used": false,  // 是否使用
                    "order_rid": null,
                    "used_at": 0
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


用户获取当前订单的符合条件的满减信息
------------------------------------------
用户获取当前订单的符合条件的满减信息

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_order_full_reduction``
* API接口请求方法：``POST``
* API接口用户授权：``token``


请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
items        Array     必须                  店铺明细
===========  ========  =========  ========  ====================================

**店铺明细**

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
items:
rid          String    必须                  店铺rid
sku_items    Array     必须                  商品详情
===========  ========  =========  ========  ====================================

**商品详情**

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
sku_items:
sku          String     必须                  sku
quantity     Integer    必须                  数量
===========  ========  =========  ========  ====================================

**参考示例**

.. code-block:: javascript

    {
        "items":[
            {
                "rid":"2",
                "sku_items":[
                    {
                        "sku":"2",
                        "quantity":2000
                    }
                ]
            }
        ]
    }


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "2": {
                "amount": 30,  // 面值
                "code": "UVYSEZXQBMH",
                "reach_amount": 300,  // 满足金额
                "type": 3, // 1、同享券 2、单享券 3、满减
                "type_text": "满300.00减30.00元",
                "use_count": 0
            }
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



优惠券详情
----------------
获取优惠券的详细信息

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/<rid>``
* API接口请求方法：``GET``

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "amount": 10,  // 面值
            "code": "UHAOSIWFUVZ",  // 优惠券code
            "count": 100,  // 领取数量
            "created_at": 1531742069,
            "days": 7,  // 有效天数
            "min_amount": 99,  // 最小金额
            "products": [],  // 可用商品
            "reach_amount": 0,  // 满足金额
            "type": 1,  // 类型 1、同享券 2、单享券 3、满减
            "type_text": "全店通用",
            "end_date": 1538582400,  // 结束时间
            "start_date": 1531670400,  // 开始时间
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }

新增优惠券
-------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/create``
* API接口请求方法：``POST``
* API接口用户授权：token

请求参数
~~~~~~~~~~~~~~~

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
name              String     必填                        活动名称
start_date        String     必填                        活动开始日期
end_date          String     必填                        活动结束日期
coupon_type       Integer    必填           1            优惠券类型 1、同享券 2、单享券
product_rids      Array      可选                        优惠商品列表
items             Array      必填                        优惠券信息列表
===============  ========  =============  ============  ============================================

**优惠券信息列表:**

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
items:
amount            Number     必填                        优惠券金额
got_count         Integer    必填                        总数量
min_amount        Number     必填                        最低金额限制
days              Integer    必填                        有效天数
===============  ========  =============  ============  ============================================

**参考示例**

.. code-block:: javascript

    {
        "name":"优惠活动2",
        "start_date":"2018-06-29",
        "end_date":"2018-07-03",
        "coupon_type":2,
        "product_rids":["1","2"],
        "items":[
            {
                "amount":1,
                "min_amount":90,
                "got_count":1000,
                "days":7
            },
        ]
    }

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "created_at": 1529998307,  // 创建时间
            "name": "优惠活动2",  //  活动名称
            "start_date": 1530201600  // 活动开始时间
            "end_date": 1530547200,  // 活动结束时间
            "activity_id": 2,  // 活动id
            "items": [
                {
                    "amount": 10,  // 面值
                    "code": "UHAOSIWFUVZ",  // 优惠券code
                    "count": 100,  // 领取数量
                    "created_at": 1531742069,
                    "days": 7,  // 有效天数
                    "min_amount": 99,  // 最小金额
                    "products": [
                        {
                            "name": "摩托",  // 优惠商品
                            "rid": "1"  // 商品rid
                        }
                    ],
                    "reach_amount": 0,  // 满足金额
                    "type": 1,  // 类型 1、同享券 2、单享券 3、满减
                    "type_text": "全店通用",
                    "end_date": 1538582400,  // 结束时间
                    "start_date": 1531670400,  // 开始时间
                }
            ],
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }


新增满减活动
-------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/full_reduction/create``
* API接口请求方法：``POST``
* API接口用户授权：token

请求参数
~~~~~~~~~~~~~~~

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
name              String     必填                        活动名称
start_date        String     必填                        活动开始日期
end_date          String     必填                        活动结束日期
items             Array      必填                        满减活动阶梯阶梯
===============  ========  =============  ============  ============================================

**优惠券信息列表:**

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
items:
amount            Number     必填                        优惠券金额
reach_amount      Number     必填                        满足金额
===============  ========  =============  ============  ============================================

**参考示例**

.. code-block:: javascript

    {
        "name":"满减活动2",
        "start_date":"2018-06-29",
        "end_date":"2018-07-03",
        "items":[
            {
                "amount":1,
                "reach_amount":10
            }
        ]
    }

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "created_at": 1529994132,  // 创建时间
            "name": "满减活动2",  // 活动名称
            "start_date": 1530201600  // 活动开始时间
            "end_date": 1530547200,  // 活动结束时间
            "activity_id": 2,  // 活动id
            "items": [
                {
                    "amount": 1,  // 优惠金额
                    "code": "URONCLZBYXT",  // 优惠券名称
                    "reach_amount": 10,  // 满减金额
                    "type": 3,  // 优惠券类型
                    "type_text": "消费满10.00元可减1.00元"
                }
            ]
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }



修改满减活动
-------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/full_reduction/update``
* API接口请求方法：``PUT``
* API接口用户授权：token

请求参数
~~~~~~~~~~~~~~~

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
activity_id       Integer    必填
name              String     可选                        活动名称
start_date        String     可选                        活动开始日期
end_date          String     可选                        活动结束日期
items             Array      可选                        满减活动阶梯阶梯
delete_codes      Array      可选                        删除的优惠券的code
===============  ========  =============  ============  ============================================

**优惠券信息列表:**

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
items:
code              String     必须                        优惠券code,新增也需要
amount            Number     必填                        优惠券金额
reach_amount      Number     必填                        满足金额
===============  ========  =============  ============  ============================================

**参考示例**

.. code-block:: javascript


    {
        "activity_id":28,
        "name":"满减活动122",
        "start_date":"2018-05-10",
        "delete_codes":[
            "UKADNHQYICL"
            ],
        "items":[
            {
                "code":"UVPAEYSMLTB",
                "amount":100,
                "reach_amount":10000
            },
            {
                "code":"0",
                "amount":12,
                "reach_amount":120
            }
        ]
    }


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "created_at": 1529994132,  // 创建时间
            "name": "满减活动2",  // 活动名称
            "start_date": 1530201600  // 活动开始时间
            "end_date": 1530547200,  // 活动结束时间
            "activity_id": 2,  // 活动id
            "items": [
                {
                    "amount": 1,  // 优惠金额
                    "code": "URONCLZBYXT",  // 优惠券名称
                    "reach_amount": 10,  // 满减金额
                    "type": 3,  // 优惠券类型
                    "type_text": "消费满10.00元可减1.00元"
                }
            ]
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }


修改优惠券活动
----------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/update``
* API接口请求方法：``PUT``
* API接口用户授权：token

请求参数
~~~~~~~~~~~~~~~

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
activity_id       Integer    必填
name              String     可选                        活动名称
start_date        String     可选                        活动开始日期
end_date          String     可选                        活动结束日期
items             Array      可选                        优惠券活动
delete_codes      Array      可选                        删除的优惠券的code
===============  ========  =============  ============  ============================================

**优惠券信息列表:**

===============  ========  =============  ============  ============================================
名称               类型       是否必须        默认值         描述说明
===============  ========  =============  ============  ============================================
items:
code              String     必须                        优惠券code,新增也需要
amount            Number     必填                        优惠券金额
got_count         Integer    必填                        总数量
min_amount        Number     必填                        最低金额限制
days              Integer    必填                        有效天数
product_rid       Array      可选                        优惠商品列表
===============  ========  =============  ============  ============================================

**参考示例**

.. code-block:: javascript

    {
        "activity_id":22,
        "name":"活动122",
        "start_date":"2018-05-10",
        "delete_codes":[
            "UPSUKWOYICN"
            ],
        "items":[
            {
                "code":"UXWJOVRFEDC",
                "amount":1,
                "days":66,
                "product_rids":[1]

            },
            {
                "code":"0",
                "amount":12,
                "min_amount":200,
                "product_rids":[1],
                "days":7,
                "got_count":9000

            }
        ]
    }


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "created_at": 1529998307,  // 创建时间
            "name": "优惠活动2",  //  活动名称
            "start_date": 1530201600  // 活动开始时间
            "end_date": 1530547200,  // 活动结束时间
            "activity_id": 2,  // 活动id
            "items": [
                {
                    "amount": 1,  // 优惠金额
                    "code": "UVGKCSLIMOA",  // 优惠券code
                    "count": 1000,  // 优惠券数量
                    "created_at": 1529998307,  // 创建时间
                    "days": 7,  // 有效天数
                    "min_amount": 90,  // 限制最小金额
                    "products": [
                        {
                            "name": "摩托",  // 优惠商品
                            "rid": "1"  // 商品rid
                        }
                    ],
                    "type": 2,  // 优惠券类型
                    "type_text": "部分商品可用"
                }
            ],
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }


撤销优惠券活动
----------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/activity/delete``
* API接口请求方法：``DELETE``
* API接口用户授权：token

请求参数
~~~~~~~~~~~~~~~
===============  ========  =========  ========  ====================================
名称              类型      是否必须    默认值     描述说明
===============  ========  =========  ========  ====================================
id               Integer     必须                  活动id
===============  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


领取优惠券
-------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/grant``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===============  ========  =========  ========  ====================================
名称              类型      是否必须    默认值     描述说明
===============  ========  =========  ========  ====================================
rid              String     必填                 优惠券code
store_rid        String     可选                 店铺rid 核心填，独立不填
===============  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupon": {
                "amount": 12,  // 优惠券金额
                "code": "UOWASNJZDFB",  // 优惠券code
                "count": 9000,  // 优惠券总数量
                "created_at": 1530081557,  // 优惠券创建时间
                "days": 7,  // 优惠券有效期
                "min_amount": 200,  // 优惠券限制金额
                "products": [
                    {
                        "name": "摩托",
                        "rid": "1"
                    }
                ],
                "type": 2,  // 优惠券类型
                "type_text": "部分商品可用"
            },
            "end_at": 1530692898,  // 优惠券到期时间
            "get_at": 1530088098,  // 领取时间
            "is_expired": false,  // 是否过期
            "is_used": false,  // 是否使用
            "order_rid": null,  // 在哪个订单上使用
            "used_at": 0  // 使用时间
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }

禁用优惠券
-------------

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/<rid>/disabled``
* API接口请求方法：``POST``
* API接口用户授权：``token``

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
      "status": {
        "code": 200,
        "message": "Ok all right."
      },
      "success": true
    }


是否72小时内首单新用户
------------------------
是否72小时内首单新用户


接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/coupons/new_user_discount``
* API接口请求方法：``GET``
* API接口用户授权：``token``


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "is_new_user": false // true:是 false:不是
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



用户领取10元官方红包
------------------------
用户领取10元官方红包

接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/bonus/grant``
* API接口请求方法：``POST``
* API接口用户授权：``token``


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "amount": 10,  // 面值
            "code": "BGQOUYRDXPV",  // code
            "expired_at": 1533312000,  // 过期时间
            "is_expired": false,  // 是否过期
            "is_used": false,  // 是否使用
            "min_amount": 0,  // 限制金额
            "start_at": 1532707200,  // 开始时间
            "type": 1,
            "user_id": 2  // 用户id
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }



用户查看自己的官方优惠券列表
----------------------------------------
用户查看自己的官方优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_official``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
===========  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "count": 4,
            "coupons": [
                {
                    "amount": 5,  // 面值
                    "code": "OUABTSDUHMG",  // code
                    "expired_at": 1540742400,  // 到期时间
                    "min_amount": 5,  // 最小满足金额
                    "start_at": 1539705600  // 开始时间
                    "source": 11,  // 1、分享领红包 2、猜图赢现金 3、赠送 4、新人奖励 11、领券中心
                    "category_id": 0,  // 分类id
                    "category_name": "全平台通用",  // 分类名
                },
            ],
            "next": true,
            "prev": false
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


用户查看自己失效的优惠券列表
----------------------------------------
用户查看自己失效的优惠券列表


请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
page         Number    可选         1         当前页码
per_page     Number    可选         10        每页数量
is_alone     Number    可选         0         是否独立小程序 0、不是 1、是独立小程序
===========  ========  =========  ========  ====================================

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_expired``
* API接口请求方法：``GET``
* API接口用户授权：``token``

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "count": 187,
            "coupons": [
                {
                    "amount": 5,  // 面值
                    "code": "OUOYDHGSPNI",  // code
                    "expired_at": 1533139200,  // 过期时间
                    "min_amount": 200,  // 最小金额
                    "start_at": 1532880000,  // 开始时间
                    "store_logo": "",  // 店铺logo
                    "store_name": "",  // 店铺名
                    "store_rid": "",  // 店铺编号
                    "type": 2  // 1、店铺优惠券 2、官方优惠券
                    "source": 11,  // 1、分享领红包 2、猜图赢现金 3、赠送 4、新人奖励 11、领券中心 12、店铺
                    "category_id": 0,  // 分类id
                    "category_name": "全平台通用",  // 分类名
                },
            ],
            "next": true,
            "prev": false
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


用户获取自己的符合当前金额的官方优惠券列表
-------------------------------------------------------
用户获取自己的符合当前金额的官方优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/user_official_fill``
* API接口请求方法：``POST``
* API接口用户授权：``token``


请求参数
~~~~~~~~~~~~~~~

=====================  ========  =========  ========  ====================================
名称                    类型      是否必须    默认值     描述说明
=====================  ========  =========  ========  ====================================
amount                 Number    必填                   总金额
sku                    Array     必填         []        sku列表，['89788798','1232131']
=====================  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "coupons": [
                {
                    "amount": 5,  // 面值
                    "category_id": 0,  // 分类id
                    "category_name": "全平台通用", // 分类名
                    "code": "BCAFTIVLKJS",  // code
                    "expired_at": 1540915200,  // 到期时间
                    "min_amount": 5,  // 最小限制金额
                    "source": 3,  // // 1、分享领红包 2、猜图赢现金 3、赠送 4、新人奖励 11、领券中心 12、店铺
                    "start_at": 1539746091  // 开始时间
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



用户查看官方优惠券列表
--------------------------
用户查看官方优惠券列表

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/official_coupons``
* API接口请求方法：``GET``
* API接口用户授权：``token``

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "data": {
            "count": 2,
            "next": null,
            "official_coupons": [
                {
                    "amount": 5,  // 面值
                    "code": "OUFCNPWIEUH",  // code
                    "count": 12999,  // 发放数量
                    "created_at": 1532763535,  // 创建时间
                    "end_date": 1533398400,  // 结束时间
                    "min_amount": 200,  // 限制金额
                    "pickup_count": 0,  // 领取数量
                    "start_date": 1532707200,  // 开始时间
                    "type_text": "满200.00减5.00元",
                    "use_count": 0,  // 使用数量
                }
            ],
            "prev": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


用户领取官方优惠券
----------------------
用户领取官方优惠券


接口说明
~~~~~~~~~~~~~

* API接口请求地址：``/market/official_coupons/grant``
* API接口请求方法：``POST``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===============  ========  =========  ========  ====================================
名称              类型      是否必须    默认值     描述说明
===============  ========  =========  ========  ====================================
rid              String     必填                 优惠券code
===============  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "amount": 10,  // 面值
            "code": "OUFCNPWIEUH",  // code
            "expired_at": 1533312000,  // 过期时间
            "is_expired": false,  // 是否过期
            "is_used": false,  // 是否使用
            "min_amount": 100,  // 限制金额
            "start_at": 1532707200,  // 开始时间
            "type": 2,
            "user_id": 2  // 用户id
        },
        "status": {
            "code": 201,
            "message": "All created."
        },
        "success": true
    }


领券中心-同享券-精品品牌券
-----------------------------
领券中心-同享券-精品品牌券

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/coupon_center_shared``
* API接口请求方法：``GET``


请求参数
~~~~~~~~~~~~~~~

====================  ========  =========  ========  ====================================
名称                   类型      是否必须    默认值     描述说明
====================  ========  =========  ========  ====================================
store_category        Number     必填         0         店铺分类id, 0、推荐
page                  Number     可选         1         当前页码
per_page              Number     可选         10        每页数量
====================  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupons": [
                {
                    "amount": 4,  // 优惠券金额
                    "coupon_code": "UMBSHQGIVDE", // 优惠券code
                    "is_recommend": true, // 是否推荐
                    "min_amount": 290, // 优惠券面值
                    "product_sku": [
                        {
                            "product_amount": 300, // 商品价格
                            "product_coupon_amount": 296, // 券后价
                            "product_cover": "http://0.0.0.0:9000/_uploads/photos/180523/8f51855eedae984.jpg",
                            "product_name": "自行车", // 商品名
                            "product_rid": "3" // 商品编号
                        }
                    ],
                    "store_bgcover": "https://s3.moebeast.com/20180910/5037FninYcPJRCGRAghbGQvQM9cD45z3.jpg",  // 店铺背景图
                    "store_logo": "http://0.0.0.0:9000/_uploads/photos/180523/8f51855eedae984.jpg",  // 店铺logo
                    "store_name": "第2家", // 店铺名
                    "store_rid": "3" // 店铺编号
                }
            ],
            "next": null,
            "prev": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


领券中心-单享券-精选商品券
-----------------------------
领券中心-单享券-精选商品券

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/coupon_center_single``
* API接口请求方法：``GET``


请求参数
~~~~~~~~~~~~~~~

====================  ========  =========  ========  ====================================
名称                   类型      是否必须    默认值     描述说明
====================  ========  =========  ========  ====================================
store_category        Number     必填           0      店铺分类id, 0、推荐
open_id               String     必填                  open_id
====================  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupons": [
                {
                    "amount": 4,  // 面值
                    "coupon_code": "UQNJSFUAZOX",  // 优惠券code
                    "is_recommend": true,  // 是否分享
                    "min_amount": 4,  // 限制金额
                    "product_amount": 10,  // 商品价格
                    "product_coupon_amount": 6,  // 券后价
                    "product_cover": "http://0.0.0.0:9000/_uploads/photos/180523/8f51855eedae984.jpg",  //
                    "product_name": "摩托",  // 商品名称
                    "product_rid": "1"  // 商品rid
                    "store_rid": "3"  // 店铺rid
                    "is_grant": false,  // 是否领取
                    "surplus_count": 1000  // 剩余数量

                }
            ],
            "next": null,
            "prev": null
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


领券中心-官方优惠券
--------------------------
领券中心-官方优惠券

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/official_coupons/recommend``
* API接口请求方法：``GET``


请求参数
~~~~~~~~~~~~~~~

====================  ========  =========  ========  ====================================
名称                   类型      是否必须    默认值     描述说明
====================  ========  =========  ========  ====================================
open_id               String     必填                  open_id
====================  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "official_coupons": [
                {
                    "amount": 5,  // 金额
                    "code": "OUNVXIDAPGZ", // 优惠券code
                    "count": 2999,  // 发放数量
                    "created_at": 1535433969, // 创建时间
                    "end_date": 1536422400, // 结束时间
                    "min_amount": 5, // 最小满足金额
                    "pickup_count": 0, // 领取数量
                    "start_date": 1535385600, // 开始时间
                    "type_text": "满5减5元", //
                    "use_count": 0 //  使用数量
                    "is_grant": false,  // 是否领取
                    "surplus_count": 1000  // 剩余数量
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


优惠券头条动态
--------------------
优惠券头条动态

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/coupon_lines``
* API接口请求方法：``GET``

请求参数
~~~~~~~~~~~~~~~

====================  ========  =========  ========  ====================================
名称                   类型      是否必须    默认值     描述说明
====================  ========  =========  ========  ====================================
status                Number     可选         1        来源，1、领券中心
count                 Number     可选         10       返回数据数量
====================  ========  =========  ========  ====================================


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "coupon_lines": [
                {
                    "activity_id": 2,  // 1、猜图赢现金 2、分享红包 3、官方 4、店铺
                    "activity_type": 2,  // 1、活动 2、游戏
                    "amount": 2,  // 金额
                    "coupon_line_id": 1,  // 动态id
                    "coupon_type": 2,  // 1: 红包; 2: 官方优惠券; 3: 店铺优惠券 4: 现金
                    "created_at": 1530781909,  // 创建时间
                    "event": 2,  // 1: 抢; 2: 被赠送; 3: 领取;
                    "line_text": "888小时前小黑在分享红包游戏中被赠送2元官方优惠券",  // 动态信息
                    "quantity": 2,  // 数量
                    "store_name": "第一家",  // 店铺名
                    "user_info": {
                        "user_logo": "http://kg.erp.taihuoniao.com/static/img/default-logo.png",
                        "user_name": "15210062187",
                        "user_sn": "17160283459"
                    }
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }



官方红包分享动态
--------------------------------
官方红包分享动态

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/bonus_lines``
* API接口请求方法：``GET``


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "bonus_count": 2,  // 数量
            "bonus_lines": [
                {
                    "activity_id": 2,  // 2、分享红包
                    "activity_type": 1,  // 1、活动 2、游戏
                    "amount": 10,  // 金额
                    "coupon_line_id": 1,  // 动态id
                    "coupon_type": 1,  // 1: 红包
                    "created_at": 1530781909,  // 创建时间
                    "event": 3,  // 3: 领取;
                    "line_text": "2小时前小黑在分享红包活动中领取10元红包",  // 动态信息
                    "quantity": 2,  // 数量
                    "store_name": "第一家",  // 店铺名
                    "user_name": '小黑'  // 用户名
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


是否领取1000元新人红包
--------------------------------
是否领取1000元新人红包

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/is_new_user_bonus``
* API接口请求方法：``GET``
* API接口用户授权：``token``


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript

    {
        "data": {
            "is_grant": 0  // 0、未领取 1、已领取
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


领取1000元新人红包
--------------------------------
领取1000元新人红包

接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/market/grant_new_user_bonus``
* API接口请求方法：``POST``
* API接口用户授权：``token``


返回示例
~~~~~~~~~~~~~~~~

JSON数据格式:

.. code-block:: javascript


    {
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }
