================
通知模块
================

获取通知详情
--------------------


接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/notice/detail``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ====================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ====================================
notice_id     Integer     必须                 通知id
user_type     Integer     可选        1        推送对象 1: 商家, 2: 普通用户
===========  ========  =========  ========  ====================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "notice": {
                "content": "水电费噶是的", // 通知内容
                "id": 4,  // 通知id
                "link": "sdfa ",  // 通知链接
                "picture": "",  // 图片路径
                "read_status": 1,  // 读取状态 1:已读; -1:未读
                "send_at": 1535981045,  // 推送时间
                "title": "费工会地方",  // 标题
                "type": 1  // 通知类型 1: 系统通知 2: 官方公告
            }
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }

获取通知列表
--------------------


接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/notice/get_official_notice``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ==============================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ==============================================
type         Integer    可选         1        通知类型 1: 系统通知 2: 官方公告
user_type    Integer    可选         1        推送对象 1: 商家, 2: 普通用户
page         Integer    可选         1        当前页码
per_page     Integer    可选         10       每页数量
===========  ========  =========  ========  ==============================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "count": 4,
            "next": false,
            "prev": false,
            "official_announcement_count": 1,  // 官方公告未读数量
            "system_notice_count": 3  // 系统通知未读数量
            "system_notice": [
                {
                    "content": "手动阀",  // 通知内容
                    "id": 3,  // 通知id
                    "link": "收到",  // 通知链接
                    "picture": "",  // 图片路径
                    "read_status": 1,  // 读取状态 1:已读; -1:未读
                    "send_at": 1535981045,  // 发送时间
                    "title": "手动阀",  // 标题
                    "type": 1  // 通知类型 1: 系统通知 2: 官方公告
                },
                {
                    "content": "水电费噶是的",
                    "id": 4,
                    "link": "sdfa ",
                    "picture": "",
                    "read_status": 1,
                    "send_at": 1535981045,
                    "title": "费工会地方",
                    "type": 1
                },
                {
                    "content": "啊删了都价格垃圾啊",
                    "id": 1,
                    "link": "大风歌",
                    "picture": "",
                    "read_status": 1,
                    "send_at": 1535978367,
                    "title": "秋天来了",
                    "type": 1
                },
                {
                    "content": "啊看书多卡还是地方",
                    "id": 2,
                    "link": "的",
                    "picture": "",
                    "read_status": 1,
                    "send_at": 1535978367,
                    "title": "天黑请闭眼",
                    "type": 1
                }
            ]
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


获取未读消息通知数量
----------------------


接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/notice/get_counts``
* API接口请求方法：``GET``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ==============================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ==============================================
user_type    Integer    可选         1        推送对象 1: 商家, 2: 普通用户
===========  ========  =========  ========  ==============================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "official_announcement_count": 0,  // 官方公告未读数量
            "system_notice_count": 1,  // 系统通知未读数量
            "total_count": 1  // 总通知数
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }


更新消息读取状态
----------------------


接口说明
~~~~~~~~~~~~~~

* API接口请求地址：``/notice/update_read_status``
* API接口请求方法：``PUT``
* API接口用户授权：``token``

请求参数
~~~~~~~~~~~~~~~

===========  ========  =========  ========  ==============================================
名称          类型      是否必须    默认值     描述说明
===========  ========  =========  ========  ==============================================
user_type    Integer    可选         1        推送对象 1: 商家, 2: 普通用户
type         Integer    可选         1        通知类型 1: 系统通知 2: 官方公告
notice_ids   Array      必须                  要更新状态的通知
===========  ========  =========  ========  ==============================================

返回示例
~~~~~~~~~~~~~~~~

JSON数据格式

请求 **正确** 返回结果：

.. code-block:: javascript

    {
        "data": {
            "system_notice_count": 1  // 更新后未读的通知数量, type为1返回system_notice_count; type为2返回official_announcement_count
        },
        "status": {
            "code": 200,
            "message": "Ok all right."
        },
        "success": true
    }
